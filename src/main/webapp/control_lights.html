<form>

  <div ng-repeat="device in devices.data">
    <h4>{{device.name}}
      <button ng-show="device.actualState == 0" ng-disabled="device.desiredState != device.actualState">
        <img ng-src="/images/light_off.png"
             ng-model="device.desiredState"
             ng-click="processForm(device.id, 1)"
             />
      </button>
      <button ng-show="device.actualState == 1" ng-disabled="device.desiredState != device.actualState">
        <img ng-src="/images/light_on.png"
             ng-model="device.desiredState"
             ng-click="processForm(device.id, 0)"
             />
      </button>
      <label ng-hide="device.desiredState == device.actualState">
        Working...
      </label>
    </h4>
  </div>
  <div class="btn-group">
    <h4>
      <button ng-click="processForm(100, 1)">All 
        <img ng-src="/images/light_on.png"/>
      </button>
      <button ng-click="processForm(100, 0)">All
        <img ng-src="/images/light_off.png"/>
      </button>
    </h4>
  </div>
</form>
